{"ast":null,"code":"import _objectSpread from\"/Users/antonio/Task_Manager_API/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useEffect,useState}from'react';import{Link}from'react-router-dom';import{useAppDispatch,useAppSelector}from'../hooks/redux';import{fetchTasks,deleteTask,toggleTaskComplete,clearError,setFilters}from'../store/tasksSlice';import TaskCard from'../components/TaskCard';import TaskSearch from'../components/TaskSearch';import Pagination from'../components/Pagination';import Loading from'../components/Loading';import{showToast}from'../components/ToastContainer';import{PlusIcon}from'@heroicons/react/24/outline';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const TaskList=()=>{const dispatch=useAppDispatch();const{tasks,loading,error,meta,filters}=useAppSelector(state=>state.tasks);const[showDeleteConfirm,setShowDeleteConfirm]=useState(null);const isLoadingTasks=loading.fetchTasks==='loading';useEffect(()=>{dispatch(fetchTasks(filters));},[dispatch,filters]);useEffect(()=>{if(error){showToast(error,'error');dispatch(clearError());}},[error,dispatch]);const handleFiltersChange=newFilters=>{dispatch(setFilters(newFilters));};const handleToggleComplete=async(id,completed)=>{try{await dispatch(toggleTaskComplete({id,completed})).unwrap();showToast(completed?'Task segnato come completato!':'Task segnato come in corso!','success');}catch(error){showToast('Errore nell\\'aggiornamento del task','error');}};const handleDelete=async id=>{if(showDeleteConfirm===id){try{await dispatch(deleteTask(id)).unwrap();showToast('Task eliminato con successo!','success');setShowDeleteConfirm(null);}catch(error){showToast('Errore nell\\'eliminazione del task','error');}}else{setShowDeleteConfirm(id);setTimeout(()=>{setShowDeleteConfirm(null);},5000);}};const handlePageChange=page=>{const newFilters=_objectSpread(_objectSpread({},filters),{},{page});dispatch(setFilters(newFilters));};if(isLoadingTasks&&tasks.length===0){return/*#__PURE__*/_jsx(Loading,{size:\"large\",text:\"Caricamento task...\"});}const showEmptyState=tasks.length===0&&!isLoadingTasks;return/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold text-gray-900\",children:\"Task\"}),meta&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-1 text-sm text-gray-600\",children:[meta.total_count,\" task totali\"]})]}),/*#__PURE__*/_jsxs(Link,{to:\"/tasks/new\",className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Nuovo Task\"]})]}),/*#__PURE__*/_jsx(TaskSearch,{onFiltersChange:handleFiltersChange,initialFilters:filters,isLoading:isLoadingTasks}),isLoadingTasks&&tasks.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:/*#__PURE__*/_jsx(Loading,{size:\"small\",text:\"Aggiornamento task...\"})}),showEmptyState&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-12\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\",\"aria-hidden\":\"true\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\"})}),/*#__PURE__*/_jsx(\"h3\",{className:\"mt-2 text-sm font-medium text-gray-900\",children:\"Nessun task trovato\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-1 text-sm text-gray-500\",children:filters.q||filters.completed?'Nessun task corrisponde ai criteri di ricerca.':'Inizia creando il tuo primo task!'}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6\",children:/*#__PURE__*/_jsxs(Link,{to:\"/tasks/new\",className:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\",children:[/*#__PURE__*/_jsx(PlusIcon,{className:\"h-4 w-4 mr-2\"}),\"Crea il tuo primo task\"]})})]}),!showEmptyState&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:tasks.map(task=>/*#__PURE__*/_jsx(TaskCard,{task:task,onToggleComplete:handleToggleComplete,onDelete:handleDelete},task.id))}),meta&&meta.total_pages>1&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-8\",children:/*#__PURE__*/_jsx(Pagination,{currentPage:meta.current_page,totalPages:meta.total_pages,totalCount:meta.total_count,perPage:meta.per_page,onPageChange:handlePageChange})})]})]});};export default TaskList;","map":{"version":3,"names":["React","useEffect","useState","Link","useAppDispatch","useAppSelector","fetchTasks","deleteTask","toggleTaskComplete","clearError","setFilters","TaskCard","TaskSearch","Pagination","Loading","showToast","PlusIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","TaskList","dispatch","tasks","loading","error","meta","filters","state","showDeleteConfirm","setShowDeleteConfirm","isLoadingTasks","handleFiltersChange","newFilters","handleToggleComplete","id","completed","unwrap","handleDelete","setTimeout","handlePageChange","page","_objectSpread","length","size","text","showEmptyState","className","children","total_count","to","onFiltersChange","initialFilters","isLoading","fill","viewBox","stroke","strokeLinecap","strokeLinejoin","strokeWidth","d","q","map","task","onToggleComplete","onDelete","total_pages","currentPage","current_page","totalPages","totalCount","perPage","per_page","onPageChange"],"sources":["/Users/antonio/Task_Manager_API/frontend/src/pages/TaskList.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { useAppDispatch, useAppSelector } from '../hooks/redux';\nimport {\n    fetchTasks,\n    deleteTask,\n    toggleTaskComplete,\n    clearError,\n    setFilters\n} from '../store/tasksSlice';\nimport TaskCard from '../components/TaskCard';\nimport TaskSearch from '../components/TaskSearch';\nimport Pagination from '../components/Pagination';\nimport Loading from '../components/Loading';\nimport { showToast } from '../components/ToastContainer';\nimport { SearchFilters } from '../types';\nimport { PlusIcon } from '@heroicons/react/24/outline';\n\nconst TaskList: React.FC = () => {\n    const dispatch = useAppDispatch();\n    const { tasks, loading, error, meta, filters } = useAppSelector(state => state.tasks);\n    const [showDeleteConfirm, setShowDeleteConfirm] = useState<number | null>(null);\n\n    const isLoadingTasks = loading.fetchTasks === 'loading';\n\n    useEffect(() => {\n        dispatch(fetchTasks(filters));\n    }, [dispatch, filters]);\n\n    useEffect(() => {\n        if (error) {\n            showToast(error, 'error');\n            dispatch(clearError());\n        }\n    }, [error, dispatch]);\n\n    const handleFiltersChange = (newFilters: SearchFilters) => {\n        dispatch(setFilters(newFilters));\n    };\n\n    const handleToggleComplete = async (id: number, completed: boolean) => {\n        try {\n            await dispatch(toggleTaskComplete({ id, completed })).unwrap();\n            showToast(\n                completed ? 'Task segnato come completato!' : 'Task segnato come in corso!',\n                'success'\n            );\n        } catch (error) {\n            showToast('Errore nell\\'aggiornamento del task', 'error');\n        }\n    };\n\n    const handleDelete = async (id: number) => {\n        if (showDeleteConfirm === id) {\n            try {\n                await dispatch(deleteTask(id)).unwrap();\n                showToast('Task eliminato con successo!', 'success');\n                setShowDeleteConfirm(null);\n            } catch (error) {\n                showToast('Errore nell\\'eliminazione del task', 'error');\n            }\n        } else {\n            setShowDeleteConfirm(id);\n            setTimeout(() => {\n                setShowDeleteConfirm(null);\n            }, 5000);\n        }\n    };\n\n    const handlePageChange = (page: number) => {\n        const newFilters = { ...filters, page };\n        dispatch(setFilters(newFilters));\n    };\n\n    if (isLoadingTasks && tasks.length === 0) {\n        return <Loading size=\"large\" text=\"Caricamento task...\" />;\n    }\n\n    const showEmptyState = tasks.length === 0 && !isLoadingTasks;\n\n    return (\n        <div className=\"space-y-6\">\n            {/* Header */}\n            <div className=\"flex items-center justify-between\">\n                <div>\n                    <h1 className=\"text-3xl font-bold text-gray-900\">Task</h1>\n                    {meta && (\n                        <p className=\"mt-1 text-sm text-gray-600\">\n                            {meta.total_count} task totali\n                        </p>\n                    )}\n                </div>\n                <Link\n                    to=\"/tasks/new\"\n                    className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                >\n                    <PlusIcon className=\"h-4 w-4 mr-2\" />\n                    Nuovo Task\n                </Link>\n            </div>\n\n            {/* Search and Filters */}\n            <TaskSearch\n                onFiltersChange={handleFiltersChange}\n                initialFilters={filters}\n                isLoading={isLoadingTasks}\n            />\n\n            {/* Loading indicator */}\n            {isLoadingTasks && tasks.length > 0 && (\n                <div className=\"text-center py-4\">\n                    <Loading size=\"small\" text=\"Aggiornamento task...\" />\n                </div>\n            )}\n\n            {/* Empty state */}\n            {showEmptyState && (\n                <div className=\"text-center py-12\">\n                    <svg\n                        className=\"mx-auto h-12 w-12 text-gray-400\"\n                        fill=\"none\"\n                        viewBox=\"0 0 24 24\"\n                        stroke=\"currentColor\"\n                        aria-hidden=\"true\"\n                    >\n                        <path\n                            strokeLinecap=\"round\"\n                            strokeLinejoin=\"round\"\n                            strokeWidth={2}\n                            d=\"M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01\"\n                        />\n                    </svg>\n                    <h3 className=\"mt-2 text-sm font-medium text-gray-900\">Nessun task trovato</h3>\n                    <p className=\"mt-1 text-sm text-gray-500\">\n                        {filters.q || filters.completed ?\n                            'Nessun task corrisponde ai criteri di ricerca.' :\n                            'Inizia creando il tuo primo task!'\n                        }\n                    </p>\n                    <div className=\"mt-6\">\n                        <Link\n                            to=\"/tasks/new\"\n                            className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500\"\n                        >\n                            <PlusIcon className=\"h-4 w-4 mr-2\" />\n                            Crea il tuo primo task\n                        </Link>\n                    </div>\n                </div>\n            )}\n\n            {/* Tasks list */}\n            {!showEmptyState && (\n                <>\n                    <div className=\"space-y-4\">\n                        {tasks.map((task) => (\n                            <TaskCard\n                                key={task.id}\n                                task={task}\n                                onToggleComplete={handleToggleComplete}\n                                onDelete={handleDelete}\n                            />\n                        ))}\n                    </div>\n\n                    {/* Pagination */}\n                    {meta && meta.total_pages > 1 && (\n                        <div className=\"mt-8\">\n                            <Pagination\n                                currentPage={meta.current_page}\n                                totalPages={meta.total_pages}\n                                totalCount={meta.total_count}\n                                perPage={meta.per_page}\n                                onPageChange={handlePageChange}\n                            />\n                        </div>\n                    )}\n                </>\n            )}\n        </div>\n    );\n};\n\nexport default TaskList;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}